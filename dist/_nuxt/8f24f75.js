(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{296:function(e,t,r){var content=r(311);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(88).default)("1a99f0de",content,!0,{sourceMap:!1})},310:function(e,t,r){"use strict";r(296)},311:function(e,t,r){var n=r(87)((function(i){return i[1]}));n.push([e.i,'body[data-v-09ef7acd]{font-family:"Inter",sans-serif}h2[data-v-09ef7acd]{color:#1f2937;font-size:1.25rem}h3[data-v-09ef7acd]{color:#374151;font-size:1rem}.bg-white[data-v-09ef7acd]{background-color:#fff}#paypal-button-container[data-v-09ef7acd]{display:flex;justify-content:center;z-index:10}.bg-gray-100[data-v-09ef7acd]{padding:.5rem}.space-y-6>*+*[data-v-09ef7acd]{margin-top:1.5rem}.flex[data-v-09ef7acd]{margin-top:1rem}.menu[data-v-09ef7acd]{z-index:50}',""]),n.locals={},e.exports=n},342:function(e,t,r){"use strict";r.r(t);var n=r(10),c=(r(47),r(89),r(207),r(33),r(18),r(113),r(206),{data:function(){return{isSubscribed:!1}},mounted:function(){this.checkSubscription();var script=document.createElement("script");script.src="https://www.paypal.com/sdk/js?client-id=AXQeb763-UfMzlLsheOGAQdXyM-xzZ4MPxXXZAaZ44MQT-7bWdbDuiRxl6-gwxuCgXf6Jnc0LKSdL1vk&currency=MXN",script.addEventListener("load",this.renderPayPalButton),document.body.appendChild(script)},methods:{checkSubscription:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=document.cookie.split(";").find((function(e){return e.trim().startsWith("email=")})))){t.next=18;break}return n=r.split("=")[1],t.prev=4,t.next=7,fetch("".concat("http://hsa-games.com","/api/user?email=").concat(n));case 7:if(!(c=t.sent).ok){t.next=13;break}return t.next=11,c.json();case 11:o=t.sent,e.isSubscribed=o.isSubscribed;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),console.error("Error al obtener la información del usuario:",t.t0);case 18:case"end":return t.stop()}}),t,null,[[4,15]])})))()},renderPayPalButton:function(){var e,t=this;window.paypal?window.paypal.Buttons({createOrder:function(data,e){return e.order.create({purchase_units:[{amount:{value:"49.00"}}]})},onApprove:(e=Object(n.a)(regeneratorRuntime.mark((function e(data,r){var n,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.order.capture();case 3:if(n=e.sent,c=document.cookie.split(";").find((function(e){return e.trim().startsWith("email=")})),!(o=c?c.split("=")[1]:null)){e.next=13;break}return e.next=10,fetch("".concat("http://hsa-games.com","/api/update-subscription"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,isSubscribed:!0})});case 10:if(e.sent.ok){e.next=13;break}throw new Error("Error al actualizar la suscripción");case 13:alert("Transacción completada por "+n.payer.name.given_name),t.$router.push("/success"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Error en el proceso de pago:",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])}))),function(t,r){return e.apply(this,arguments)}),onError:function(e){console.error("Error en el proceso de pago:",e)}}).render("#paypal-button-container"):console.error("PayPal SDK no está cargado.")},cancelSubscription:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=document.cookie.split(";").find((function(e){return e.trim().startsWith("email=")})),n=r?r.split("=")[1]:null,!n){t.next=14;break}return t.next=7,fetch("".concat("http://hsa-games.com","/api/update-subscription"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,isSubscribed:!1})});case 7:if(t.sent.ok){t.next=10;break}throw new Error("Error al cancelar la suscripción");case 10:alert("Suscripción cancelada con éxito"),e.$router.push("/cancel"),t.next=15;break;case 14:alert("No se encontró un correo electrónico en las cookies");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.error("Error en el proceso de cancelación:",t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))()}}}),o=c,l=(r(310),r(32)),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"relative z-0 bg-white max-w-sm mx-auto py-6 px-2 sm:px-4 lg:px-6"},[t("div",{staticClass:"space-y-6"},[e._m(0),e._v(" "),t("div",{staticClass:"bg-gray-100 py-4 px-2 shadow sm:rounded-lg sm:px-6"},[t("h3",{staticClass:"text-lg font-medium text-gray-700 text-center mb-4"},[e._v("Métodos de Pago")]),e._v(" "),t("div",{staticClass:"mt-2 relative",attrs:{id:"paypal-button-container"}}),e._v(" "),e.isSubscribed?t("button",{staticClass:"mt-4 w-full rounded-md bg-red-400 px-3 py-2 text-center text-xs font-semibold text-white shadow-sm hover:bg-red-500",on:{click:e.cancelSubscription}},[e._v("\n        Cancelar Suscripción\n      ")]):e._e()])])])}),[function(){var e=this,t=e._self._c;return t("div",[t("h2",{staticClass:"text-center text-2xl font-semibold text-gray-900"},[e._v("Suscríbete por solo $49")]),e._v(" "),t("p",{staticClass:"mt-1 text-center text-xs text-gray-600"},[e._v("\n        Elige el método de pago y accede a contenido exclusivo.\n      ")])])}],!1,null,"09ef7acd",null);t.default=component.exports}}]);